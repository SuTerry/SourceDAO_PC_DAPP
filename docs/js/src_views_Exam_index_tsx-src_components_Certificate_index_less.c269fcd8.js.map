{"version":3,"file":"js/src_views_Exam_index_tsx-src_components_Certificate_index_less.c269fcd8.js","mappings":"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","sources":["webpack://sourcedao-pc-dapp/./src/components/Exam/CountDown/index.tsx","webpack://sourcedao-pc-dapp/./src/components/Exam/Submit/index.tsx","webpack://sourcedao-pc-dapp/./src/views/Exam/Dialog/index.tsx","webpack://sourcedao-pc-dapp/./src/assets/images/sbt/address.png","webpack://sourcedao-pc-dapp/./src/components/SBT/index.tsx","webpack://sourcedao-pc-dapp/./src/assets/images/sbt/mask.png","webpack://sourcedao-pc-dapp/./src/views/Exam/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\n\nimport { Card, CardContent, Typography } from '@mui/material'\n\nimport langHook from '@hooks/localHook'\n\nimport { examLang } from '@langs/index'\n\ninterface CountDownProps {\n  duration: number\n  setTimeout: (timeout: boolean) => void\n}\n\nlet countDown: undefined | NodeJS.Timeout = undefined\n\nexport default ({ duration, setTimeout }: CountDownProps): JSX.Element => {\n\n  const local = langHook()\n\n  const [count, setCount] = useState(duration * 60)\n\n  useEffect(() => {\n    countDown = setInterval(() => {\n      setCount((count) => {\n        if (count === 0) {\n          setTimeout(true)\n          clearInterval(countDown)\n        }\n        return count > 0 ? count - 1 : 0\n      })\n    }, 1000)\n    return () => clearInterval(countDown)\n  }, [])\n\n  const _count = (() => {\n    const _m = Math.floor(count / 60)\n    const _s = count % 60\n    const m = _m < 10 ? `0${_m}` : _m\n    const s = _s < 10 ? `0${_s}` : _s\n    if (m === '00' && s === '00') {\n      return '00:00'\n    } else {\n      return `${m}:${s}`\n    }\n  })()\n\n  return (\n    <Card sx={{ mb: 6 }}>\n      <CardContent>\n        <Typography sx={{ fontSize: 14 }} color=\"text.secondary\">\n          {local(examLang.timeRemaining)}\n        </Typography>\n        <Typography variant=\"h3\" sx={{\n          textAlign: 'center',\n          fontWeight: 700,\n        }} >\n          {_count}\n        </Typography>\n      </CardContent>\n    </Card>\n  )\n}","import React, { useEffect, useState } from 'react'\n\nimport { Button, Dialog, DialogTitle, DialogActions } from '@mui/material'\n\nimport langHook from '@hooks/localHook'\n\nimport { examLang } from '@langs/index'\n\n\ninterface SubmitProps {\n  answers: number[]\n  timeout: boolean\n  submit: () => void\n}\n\nconst buttonStyle = {\n  width: 200\n}\n\nexport default ({ answers, timeout, submit }: SubmitProps): JSX.Element => {\n\n  const local = langHook()\n\n  const [open, setOpen] = useState(false)\n\n  const [title, setTitle] = useState('')\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleConfim = async () => {\n    handleClose()\n    submit()\n  }\n\n  useEffect(() => {\n    if (!timeout) return\n\n    setTitle(local(examLang.over))\n\n    setOpen(true)\n  }, [timeout])\n\n  const handleSubmit = async () => {\n\n    const index = answers.findIndex(answer => answer === 0)\n\n    if (index > -1) {\n      setTitle(local(examLang.undone))\n    } else {\n      setTitle(local(examLang.done))\n    }\n\n    setOpen(true)\n  }\n\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        size=\"large\"\n        fullWidth\n        onClick={handleSubmit}\n      >\n        {local(examLang.submitted)}\n      </Button>\n\n      <Dialog\n        open={open}\n        onClose={timeout ? () => null : handleClose}\n        maxWidth=\"md\"\n        fullWidth={true}\n      >\n        <DialogTitle\n          sx={{\n            p: 20,\n            pb: 16,\n            textAlign: 'center',\n            fontSize: 36,\n            fontWeight: 700,\n          }}\n        >\n          {title}\n        </DialogTitle>\n        <DialogActions\n          sx={{\n            display: 'flex',\n            justifyContent: 'space-around',\n            mb: 6,\n          }}\n        >\n          {\n            !timeout && <Button variant=\"outlined\" sx={buttonStyle} onClick={handleClose}>\n              {local(examLang.cancel)}\n            </Button>\n          }\n          <Button variant=\"contained\" sx={buttonStyle} onClick={handleConfim} autoFocus>\n            {local(examLang.confirm)}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}","import React from 'react'\n\nimport { useNavigate } from 'react-router-dom'\n\nimport {\n  Box,\n  Button,\n  CircularProgress,\n  Dialog,\n  Slide,\n  Typography,\n} from '@mui/material'\n\nimport { TransitionProps } from '@mui/material/transitions'\n\nimport langHook from '@hooks/localHook'\nimport { examLang } from '@langs/index'\n\nimport Certificate, { CertificateProps } from '@components/Certificate'\n\nimport { CheckBox } from '@mui/icons-material'\n\nconst Transition = React.forwardRef(function Transition(\n  props: TransitionProps & {\n    children: React.ReactElement\n  },\n  ref: React.Ref<unknown>\n) {\n  return <Slide direction=\"up\" ref={ref} {...props} />\n})\n\ninterface DialogProps {\n  open: boolean\n  sbt: CertificateProps | undefined\n}\n\nexport default ({ open, sbt }: DialogProps): JSX.Element => {\n  const navigate = useNavigate()\n\n  const local = langHook()\n\n  const handle = () => navigate('/')\n\n  return (\n    <div>\n      <Dialog fullScreen open={open} TransitionComponent={Transition}>\n        <Box\n          sx={{\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            alignItems: 'center',\n          }}\n        >\n          {sbt ? (\n            <>\n              <CheckBox\n                sx={{\n                  mb: 1,\n                }}\n              />\n              <Typography variant=\"h6\" component=\"h6\" sx={{ mb: 4 }}>\n                {local(examLang.congratulations)}\n              </Typography>\n              <Certificate {...sbt} />\n              <Button\n                variant=\"outlined\"\n                sx={{\n                  mt: 4,\n                  width: 260,\n                }}\n                onClick={handle}\n              >\n                {local(examLang.confirm)}\n              </Button>\n            </>\n          ) : (\n            <>\n              <CircularProgress />\n              <Typography sx={{ mt: 6 }}>\n                {local(examLang.examResult)}\n              </Typography>\n            </>\n          )}\n        </Box>\n      </Dialog>\n    </div>\n  )\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAM1BMVEUAAAD///////////////////////////////////////////////////////////////+3leKCAAAAEHRSTlMA76Ag34BAEM+QML9wYF+vUsNgkwAAAKdJREFUKM+lkEsCwyAIRMWAv3w69z9tp9ZGbbNq3gLDjCDE/U/ICiS/fMkxo+HjpCeI8XLJgjQ6Htp6LIrH0B9C/RA96AjCUOAZFRAexuRDQmEUQGu5ngbwirvKziMCs3GVKVtFawsWpNPIMA5TkYWTjONGQ8W4SOhtV2S3r8Aa3FhQtzreX1vdtcO8OFKAzU3kepMPWNf6f6TOB34dka7PDvVLzNwdnqR6Brvb7bmbAAAAAElFTkSuQmCC\"","import React, { forwardRef } from 'react'\n\nimport { useAppSelector } from '@store/index'\n\nimport { scoreGrade, dateTimeConversion } from '@utils/index'\n\nimport './index.less'\n\nimport AddressImg from '@images/sbt/address.png'\nimport MaskImg from '@images/sbt/mask.png'\n\nexport interface SBTProps {\n  score: number\n  name: string\n  org: string\n  level: number\n}\n\nexport default forwardRef<HTMLDivElement, SBTProps>(\n  ({ score, name, org, level }, ref): JSX.Element => {\n    const { accountAddress } = useAppSelector((store) => store.wallet)\n\n    const time = new Date().getTime()\n    const year = dateTimeConversion(time, 'YYYY')\n    const month = dateTimeConversion(time, 'MMM')\n    const day = dateTimeConversion(time, 'DD')\n\n    const date = `${day}th ${month}, ${year}`\n\n    return (\n      <div className=\"sbt\" ref={ref}>\n        <p className=\"sbt_text\">This is to certify the degree of</p>\n        <h6 className=\"sbt_name\">{name} Level({level})</h6>\n        <p className=\"sbt_sourc\">{scoreGrade(score).toLocaleUpperCase()}</p>\n        <div className=\"sbt_addressImg\">\n          <img src={AddressImg} alt=\"\" />\n        </div>\n        <p className=\"sbt_address\">{accountAddress}</p>\n        <div className=\"sbt_bottom\">\n          <div className=\"sbt_bottom_date\">{date}</div>\n          <div className=\"sbt_bottom_org\">{org.toLocaleUpperCase()}</div>\n          <img src={MaskImg} className=\"sbt_bottom_mask\" />\n        </div>\n      </div>\n    )\n  }\n)\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAMAAABEQrEuAAACE1BMVEUAAADudqrubqHubqbub6Tvap/zZZruXZHuaaDwZZv0b6TvbaLxbKDvZprvbaLvb6TxaJ3ua6DvaZ7vaqDubqXub6XrXpDwX5Pva5/ub6bvZZvwZpvvZpvua6LubqTwaJ7ubKHvZprvbKTwaqDxbaPvb6f0aZ3wVoviWIjbVX3ubaLua6HvbKLvb6TvZJnsYZTuZ53wY5jvY5fub6TuY5jwa6DvaZ3vbaLucKbuY5fwaJ/rYpbuYpbtYJTuZpu2Pm7OTn3ubqbwYpbubKTuY5/ud6rvaJ3rZJfZWYvqXY7ucKXubKGyPW3wZ5zubqTubqXxZJnoXpDoZpnmWYrqW46XLVi9QnHuXpHfWIjnXY/fWYn0b6TnW4xBASDnWovZU4bvZZveWYvvaZ7jXY/KTHs4BBzpYJPvZJjuX5KEJk3WWIjxY5nhV4rNTHzucKbiXY7SUoHKTHmUJ1SILFE+AR/iXIvrYZXHTHdXBi7ubqLMTXyzRG87ABmHJ0/LTHzkXo/NTH3qaZ6TJ1XWWYqgN2CHJ0/nW4xPCircWo5pID7MTHzJRHbkXZC2P26iM13sZZvjW41ODyvaWIkwABjpap3UUoFPDyvoZ5x/IkppBje8RnayPGqLK1JyET/mZpykOGI2ABzTToG7QXCLJVKSK1IrABXQTHvARG+hN16QK1EzAB6fKFuhK12IIlWAK00zASIpAxVRLHQVAAAAsXRSTlMADx48eXkeDy08HrU843lpWjzTl5eIeTzjtbV5alvjtYiIampaSy0eHg/y8uPT09OIiHlaWkvi08TEpqWXiHl5alpMSx8Q8vLy4tTU1NPFppeWiIdqaltaWks8LS0e8vLx49TU09PEtbW1tKaXl3l5eXl5eXlpWlo8Hx4PD/Hj4eHU1NPT09LSxMS1tbS0tKamppeXloiHeXl5ampqaVtbWktLSz09PDw8PDwtHx4eEBBEbbv/AAADwklEQVRIx4WUZUMbQRCGn5Nc3D0EYpAGKF7DC4W6u7u7u7u7u7v9xCaXtCS9JDyfdmb33Z3ZnR00CJJ3VoO1vq7etfn2+G8Mh1ATbAjKNYoeEP0Hd1xe6x5BGY71WIN9AvkouulbnSUFo052SNmDwjpZ9un6k1l3o9tEMfSb2j9mlidku5Q9J7lk9wMHaXTTF6DF0NQMOD32wqiSrY8UWLF+rkYgjXWAvmIUGkyqc+5GfaF79EgDOA/oKYbSOgJ87bX5vhFjk5BIUAKlRYTYjTyP2DQa4hZK4zPBlodDtqcHbAbK0XuUXxsOk6OyAaQ45dley4cNx3PGNBHRRmnUcMVeuLcPlQMe0ImUwml2KaR58YXf57OXeSZ9RHVJwfwxOuMhdbQfdunULMygK7Fc7zvXH4iOfPojYxz+StJKGnN16SNcnSuIuMTZp1VrD0SMINQJxEtkUTkWGKivcgtZxXHCMZDM4EWLYAuEwgH41FUt5Vw/FzDQCLINwa4VhK2h/jETXGuvnho/5NwLVhPmGiRJU/qOtoCpd6IkLlpcS4Gi8y0zDdgFTe3Xi5FV16J1EwrdT44x9zkjBbz/3agAQbNx1XIU/d01k/OqYWGKXfuYBDL51K6ryPwX5i0GV6z2Zd1QzEuWs3AHkwsU/shY75sqkZhZLaiJwMy+oVk/i+cUKiqbLFJDj3uMNSTqt7vEgdVOjHVDj9W/nGfdTDP9VQw6aB8NtgiWZcDKljGVtvp2a172YT37dzPOQJ/ajuKBkLI5xuAsLxgPpphuCK3uNiTzv34r3HmHu41lNYDUYDE65q/cVNWBZA5sXWPYOHGb0Za/Xi3YK5+Je7OJSCObpszYpjgsCJk6mj2nI4pKoeIELJsKHrUB+Y/easlOzAB3t07z8Y1GnDeBKhM16pW3TJmXe0NXc8xapKX7wJ2pMq+MIKtb/Cuh6klzBK1gRXrDxsxGUhWayiraiR6nWHhdHQXbMocMi5gOaEv2x0vp3PukYRU2kVeXcuOgDN7BYQSLlsD61znDNPUIgqe8wJQA3/1/pn3cICa5bBJ2eH9RzGvVHjD5SgsMNvh+YWl+4xi3E8ROpYSgzQ4DZxfA/xISDoogyBKMWNf7vzs46wgonUs16+2Z5/VPmY8GudEPLO2uFPMbe0VCSKuijUaK4HDNTgGio7lC53AaF1W3tsgW9btP6xBKdPKKSV0pVBSLMZW7B8kccZZ5p64mc6UhLwl/s9XspDwTPDOsoWhFeFRY554ZCLUqDE86pHhPc1dU12YoFv4faSeD9jvxtdcAAAAASUVORK5CYII=\"","import React, {\n  ChangeEvent,\n  useEffect,\n  useState,\n  useCallback,\n  useRef,\n} from 'react'\nimport { findDOMNode } from 'react-dom'\n\nimport { useLocation, useNavigate } from 'react-router-dom'\n\nimport { Box } from '@mui/material'\n\nimport html2canvas from 'html2canvas'\n\nimport { useAppSelector } from '@store/index'\n\nimport { examApi, workflowApi, rewardApi, centerApi } from '@api/index'\n\n// import { dataURLtoFile } from '@utils/index'\n// import { add } from '@utils/ipfs'\n\nimport { CSTSCORELEVEL, CSTLEVEL } from '@constants/exam'\n\nimport Title from '@components/Exam/Title'\nimport Take, { ExamJson } from '@components/Exam/Take'\nimport CountDown from '@components/Exam/CountDown'\nimport Navigate from '@components/Exam/Navigate'\nimport Submit from '@components/Exam/Submit'\nimport Dialog from './Dialog'\nimport SBT, { SBTProps } from '@components/SBT'\n\nimport type { CertificateProps } from '@components/Certificate'\n\ntype State = {\n  type: number\n  level: keyof typeof CSTLEVEL\n  name: string\n  org: string\n  examId: string\n}\n\nexport default (): JSX.Element => {\n\n  const { state } = useLocation()\n\n  const navigate = useNavigate()\n\n  const { accountAddress } = useAppSelector((store) => store.wallet)\n\n  const beforeunload = (event: BeforeUnloadEvent) => {\n    event.returnValue = ''\n  }\n\n  const [exam, setExam] = useState<Array<null | ExamJson>>([])\n\n  const [answers, setAnswers] = useState<number[]>([])\n\n  const [duration, setDuration] = useState(-1)\n\n  const [currentExam, setCurrentExam] = useState(0)\n\n  const [timeout, setTimeout] = useState(false)\n\n  const [open, setOpen] = useState(false)\n\n  const [sbtData, setSbtData] = useState<SBTProps>()\n\n  const [sbt, setSbt] = useState<CertificateProps>()\n\n  const sbtRef = useRef<HTMLDivElement | null>(null)\n\n  const [routerState, setRouterState] = useState<State | undefined>()\n\n  const handleChange = useCallback(\n    (event: ChangeEvent<HTMLInputElement>, index: number) => {\n      const _answers = [...answers]\n      _answers.splice(index, 1, parseInt(event.target.value))\n      setAnswers(_answers)\n    },\n    [answers]\n  )\n\n  const submit = async () => {\n    setOpen(true)\n    const score = getScore()\n    const { org, name, level } = routerState!\n    setSbtData({ score, org, name, level: (level as unknown) as number })\n  }\n\n  const init = async () => {\n    if (!state) return navigate('/certificationCenter')\n\n    setRouterState(state)\n\n    addEventListener('beforeunload', beforeunload)\n\n    document.onkeydown = (e) => {\n      if (e.keyCode === 116) return false\n    }\n    document.oncontextmenu = () => false\n    \n    const cids = await examApi.getExam(state.examId)\n\n    const _duration = await examApi.getExaminationDuration(\n      state.type,\n      state.level\n    )\n\n    // dev code\n    setDuration(_duration)\n\n    setExam(new Array(cids.length).fill(null))\n    setAnswers(new Array(cids.length).fill(0))\n\n    // const exams = await cat<ExamJson>(cids)\n    const exams = await centerApi.exams(cids)\n\n    setExam(exams)\n  }\n\n  const getScore = () => {\n    let totalScore = 0\n    let userScore = 0\n    exam.forEach((item, index) => {\n      if (!item) return\n      totalScore += CSTSCORELEVEL[item.level]\n      if (item.standard === answers[index])\n        userScore += CSTSCORELEVEL[item.level]\n    })\n    const score = (userScore / totalScore) * 100\n    return Math.round(score * 100) / 100\n  }\n\n  useEffect(() => {\n    init()\n    return () => {\n      removeEventListener('beforeunload', beforeunload)\n      document.onkeydown = (e) => {\n        if (e.keyCode === 116) return true\n      }\n      document.oncontextmenu = () => true\n    }\n  }, [])\n\n  useEffect(() => {\n    if (!sbtData) return\n    const dom = findDOMNode(sbtRef.current) as HTMLElement\n    let hash = 'null'\n    const canvas = document.createElement('canvas')\n    const width = 300\n    const height = 400\n    canvas.width = width * 20\n    canvas.height = height * 20\n    // 设定 canvas css宽高为 DOM 节点宽高\n    canvas.style.width = `${width}px`\n    canvas.style.height = `${height}px`\n    // 获取画笔\n    html2canvas(dom, { canvas, scale: 20 }).then(async (canvas) => {\n      const dataURI = canvas.toDataURL('image/png')\n      const { score } = sbtData\n      // const file = dataURLtoFile(dataURI)\n      // hash = await add(file)\n      const resImg = await centerApi.uploadImage(dataURI)\n      hash = resImg.hash\n      \n      const res = await workflowApi.submit(\n        accountAddress,\n        routerState!.examId,\n        Math.floor(score),\n        answers,\n        hash\n      )\n      await res.wait()\n      const data = await rewardApi.getPreSBTMetaByExam(routerState!.examId)\n\n      setSbt({ sbt: dataURI, data })\n    })\n  }, [sbtData])\n\n  useEffect(() => {\n    if (state) navigate('.', { state: null }) \n  }, [navigate])\n\n  return (\n    <>\n      {routerState && duration > -1 && (\n        <>\n          <Box sx={{ display: 'flex' }}>\n            <Box sx={{ flex: 1, mr: 6 }}>\n              <Title\n                {...routerState}\n                duration={duration}\n                total={exam.length.toString()}\n              />\n              <Take\n                exam={exam}\n                currentExam={currentExam}\n                handleChange={handleChange}\n              />\n            </Box>\n            <Box sx={{ width: 360 }}>\n              <CountDown duration={duration} setTimeout={setTimeout} />\n              <Navigate answers={answers} setCurrentExam={setCurrentExam} />\n              <Submit answers={answers} timeout={timeout} submit={submit} />\n            </Box>\n          </Box>\n          <Dialog open={open} sbt={sbt} />\n          {sbtData && <SBT {...sbtData} ref={sbtRef} />}\n        </>\n      )}\n    </>\n  )\n}\n"],"names":["countDown","undefined","duration","setTimeout","local","langHook","useState","count","setCount","useEffect","setInterval","clearInterval","_m","_s","m","s","_count","Math","floor","Card","sx","mb","CardContent","Typography","fontSize","color","examLang","variant","textAlign","fontWeight","buttonStyle","width","answers","timeout","submit","open","setOpen","title","setTitle","handleClose","handleConfim","handleSubmit","index","findIndex","answer","Button","size","fullWidth","onClick","Dialog","onClose","maxWidth","DialogTitle","p","pb","DialogActions","display","justifyContent","autoFocus","Transition","React","props","ref","Slide","direction","sbt","navigate","useNavigate","fullScreen","TransitionComponent","Box","height","flexDirection","alignItems","CheckBox","component","Certificate","mt","CircularProgress","forwardRef","score","name","org","level","accountAddress","useAppSelector","store","wallet","time","Date","getTime","year","dateTimeConversion","month","day","date","className","scoreGrade","toLocaleUpperCase","src","alt","state","useLocation","beforeunload","event","returnValue","exam","setExam","setAnswers","setDuration","currentExam","setCurrentExam","sbtData","setSbtData","setSbt","sbtRef","useRef","routerState","setRouterState","handleChange","useCallback","_answers","splice","parseInt","target","value","getScore","init","addEventListener","document","onkeydown","e","keyCode","oncontextmenu","examApi","examId","cids","type","_duration","Array","length","fill","centerApi","exams","totalScore","userScore","forEach","item","CSTSCORELEVEL","standard","round","removeEventListener","dom","findDOMNode","current","hash","canvas","createElement","style","html2canvas","scale","then","dataURI","toDataURL","resImg","workflowApi","res","wait","rewardApi","data","flex","mr","Title","total","toString","Take","CountDown","Navigate","Submit","SBT"],"sourceRoot":""}